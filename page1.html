<!DOCTYPE html>
<html>
    <head>
        <title>Interactive Guide to PS</title>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Nanum+Gothic+Coding&display=swap" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="styles.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
        <script>
            $(document).ready(function(){
                $("#module").hide();
                $("div.judge").each(function(i){
                    let inner=document.getElementById("module").innerHTML
                    let judg=$(this);
                    let which=judg.attr('id');

                    let obj="";

                    fetch(which+".json")
                    .then(function(res){
                        if(!res.ok){
                            throw new Error("http error");
                        }
                        return res.json();
                    })
                    .then(function(data){
                        obj=data;
                        inner=inner.replace("$statement$",obj.statement);
                        inner=inner.replace("$input-form$",obj.inputf);
                        inner=inner.replace("$output-form$",obj.outputf);
                        inner=inner.replace("$input$",obj.input);
                        inner=inner.replace("$output$",obj.output);
                        judg.html(
                            inner
                        );
                        console.log(obj);
                        judg.find('#subm').click(function(){
                            let x=$("#snackbar");
                            
                            $.post("https://emkc.org/api/v2/piston/execute",
                                {
                                    "language":"python",
                                    "version":"3.10.0",
                                    "files":[
                                        {"content":judg.find("#code").val()}
                                    ],
                                    "stdin":judg.find("#input").val(),
                                    "run_timeout":100
                                },
                                function(data){
                                    if(data.run.signal!=null){
                                        x.text("Bad Result (TLE/MLE)")
                                        x.addClass("show");
                                        setTimeout(function(){x.removeClass("show");},2000);
                                    }
                                    else{
                                        let out=data.run.stdout
                                        if(out===obj.output){
                                            x.text("Accepted")
                                            x.addClass("show");
                                            setTimeout(function(){x.removeClass("show");},2000);
                                        }
                                        else{
                                            x.text("Wrong Answer")
                                            x.addClass("show");
                                            setTimeout(function(){x.removeClass("show");},2000);
                                        }
                                    }
                                }
                            ).fail(function(xhr,stat,err){
                                x.text("Ajax Call Error")
                                x.addClass("show");
                                setTimeout(function(){x.removeClass("show");},2000);
                            })
                        });
                    }).catch(function(err){
                        alert(err);
                    });
                    
                });
            });
        </script>
    </head>
    <body>
        <div class="container">
            <div class="sidebar">
                <ul class="links">
                    <li><a href="page1.html">시작하기</a></li>
                    <li>입출력에 대해</li>
                    <li>기본적인 연산</li>
                </ul>
            </div>
            <div class="content">
                <h1>안녕하세요!</h1>
                <div>
                    Interactive Guide to PS는 컴퓨터로 하는 문제 해결 (Problem Solving, PS)에 대한 전반적인 가이드를 제공하는 것을 목표로 하고 있습니다. 다른 가이드와는 다음과 같은 차이점을 두는 것을 지향하고 있습니다.
                </div>
                <ul>
                    <li>PS에 대한 대부분의 가이드는 정보를 제공하는 사이트와 채점 서비스를 지원하는 사이트가 다릅니다.</li>
                    <li>때문에 가이드를 제공하는 페이지와 채점 페이지를 번갈아가며 이동하는 데는 상당한 번거로움이 있습니다.</li>
                    <li>이 가이드는 가이드와 채점을 하나의 페이지에서 제공하는 것을 목표로 합니다.</li>
                </ul>
                <div class="judge" id="judge-1">judge-1</div>
                <div>
                    가이드 중에 위와 같은 "문제 폼"이 종종 등장합니다. 폼이 등장할 때마다 가이드에서 배우는 내용에 따라 문제를 풀어보고 넘어갈 것을 추천합니다. Python을 이미 알고 있다면 여기서 바로 시도해 보실 수도 있습니다!
                </div>
                <br>
                <div>
                    기본적으로 이 가이드에서는 Python을 기준으로 설명합니다. 장기적으로 다른 언어를 지원할 수도 있지만, 현재는 지원할 계획이 없습니다. 다른 언어에 관해 가이드를 작성하고자 하는 경우 <a href="https://github.com/matt-roh/matt-roh.github.io" class="inline">GitHub</a>에서 클론하여 비교적 간단하게 수정할 수 있을 것으로 생각하고 있습니다.
                </div>
                <br>
                <div>
                    문제 폼에서의 채점은 <a href="https://github.com/engineer-man/piston" class="inline">Piston API</a>를 사용합니다. Public API이기 때문에, 어느 정도의 빈도 제한은 감안해 주시기 바랍니다. 채점 환경은 다음과 같습니다.
                </div>
                <ul>
                    <li>언어: Python 3</li>
                    <li>언어 버전: 3.10.0</li>
                    <li>시간 제한: <b>0.1초</b></li>
                    <li>메모리 제한: 별도 설정 없음 (API에서 제공하는 만큼)</li>
                </ul>
            </div>
        </div>
        <div id="module">
            <form>
                <div class="module-container">
                    <div class="task" id="task">
                            <h3>문제</h3>
                            <div class="statement">
                                $statement$
                            </div>
                            <h3>입력 형식</h3>
                            <div class="inputf">
                                $input-form$
                            </div>
                            <h3>출력 형식</h3>
                            <div class="outputf">
                                $output-form$
                            </div>
                            <h3>입력</h3>
                            <textarea readonly id="input" style="resize:none;">$input$</textarea>
                            <h3>출력</h3>
                            <textarea readonly id="output" style="resize:none;">$output$</textarea>
                    </div>
                    <div class="coding" id="coding">
                            <textarea class="code" id="code" cols="30"></textarea>
                            <button class="subm" id="subm" type="button"><b>제출!</b></button>
                    </div>
                </div>
            </form>
        </div>
        <div id="snackbar">
            채점 결과
        </div>
    </body>
</html>